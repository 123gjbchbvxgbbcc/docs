# 语义标准

这里列出了应该由各适配器实现的标准消息元素。各适配器由于平台的限制可能表现出一定的行为差异，但应尽可能贴近标准规定的语义。

::: tip
为了方便记忆，我们使用了许多 HTML 中出现的标签来表达类似的语义，如 `<p>`, `<em>` 等。但需要指出的是，这并不意味着这些同名的标签就有着相同的语义。这里举出几个例子：

- HTML 中标签 `<u>` 的定义是「表意不清标注元素」，而 Koishi 这里只使用了下划线的功能
- HTML 中图像对应 `<img>` 标签，而 Koishi 中则是 `<image>`，并且语法也不相同
:::

## 基本元素

基本元素是最常见的消息元素，它们能够在大多数平台上正常显示，是组成消息的基本单位。

### 纯文本 (text)

- **content:** `string` 文本内容

这是一个特殊的消息元素。它等价于一段纯文本，并且在序列化时也不会带两侧的标签。

### 提及用户 (at)

- **id:** `string` 目标用户的 ID
- **name:** `string` 目标用户的名称
- **role:** `string` 目标角色
- **type:** `string` 特殊操作，例如 all 表示 @全体成员，here 表示 @在线成员

`<at>` 元素用于提及某个或某些用户。

::: tip
由于上述几个属性的语义是互斥的，发送时使用 `id`, `role`, `type` 其一即可。
:::

### 提及频道 (sharp)

- **id:** `string` 目标频道的 ID
- **name:** `string` 目标频道的名称

`<sharp>` 元素用于提及某个频道。

### 表情 (face)

- **id:** `string` 表情的 ID
- **name:** `string` 表情的名称

`<face>` 元素用于显示某个表情。

## 行内元素

行内元素用于修饰其中的内容。如果对应的平台不支持对应的元素，可以忽略这个元素本身，正常渲染其中的子元素。

### 粗体 (b)

`<b>` 元素用于将其中的内容以粗体显示。

### 斜体 (em)

`<em>` 元素用于将其中的内容以斜体显示。

### 下划线 (u)

`<u>` 元素用于为其中的内容附加下划线。

### 删除线 (del)

`<del>` 元素用于为其中的内容附加删除线。

### 剧透 (spl)

`<spl>` 元素用于将其中的内容标记为剧透 (默认会被隐藏，点击后才显示)。

### 代码 (code)

`<code>` 元素用于将其中的内容以等宽字体显示 (通常还会有特定的背景色)。

### 上标 (sup)

`<sup>` 元素用于将其中的内容以上标显示。

### 下标 (sub)

`<sub>` 元素用于将其中的内容以下标显示。

## 段落元素

### 段落 (p)

`<p>` 元素表示一个段落。在渲染时，它与相邻的元素之间会确保有一个换行。

## 资源元素

资源消息元素表示文本中存在的资源文件。不同的平台对资源文件的支持存在较大的差异。发送时只需提供 `url`。如果某个平台不支持特定的资源类型，适配器应该用 `url` 代替。如果某个平台不支持将资源消息元素和其他消息元素同时发送，适配器应该分多条发送，并返回最后一条消息的 ID。

- **file:** `string` 资源在本地目录的相对路径
- **url:** `string` 资源的 URL（可以是网络 URL，文件绝对路径，或 base64 协议等）
- **cache:** `boolean` 是否使用已缓存的文件
- **timeout:** `string` 下载文件的最长时间

### 图片 (image)

除了上述通用属性外，还支持下面的属性：

- **type:** 特殊类型，例如 `flash` 表示 QQ 闪照

### 语音 (audio)

参见上述通用属性。

### 视频 (video)

参见上述通用属性。

### 文件 (file)

参见上述通用属性。
